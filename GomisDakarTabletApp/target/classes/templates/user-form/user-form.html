<form class="form" role="form" autocomplete="off" th:if="${(motoVarList == false or motoVarList == null) and (motoVarForm == false or motoVarForm == null)}" th:object=" ${userForm}">
	<!--Es necesario para poder pasar la validacion del Model-->
	<input class="form-control" type=hidden th:field="${userForm.id}"  th:if="${editMode}">

	<div class="form-group row">
		<label class="col-lg-3 col-form-label form-control-label">DNI</label>
		<div class="col-lg-9">
			<input class="form-control" type="text" th:field=" ${userForm.dni}" >
			<div class="alert-danger" th:if="${#fields.hasErrors('dni')}" th:errors="*{dni}">DNI ERROR</div>
		</div>
	</div>
	<div class="form-group row">
		<div class="col-lg-12 text-center">
			<a class="btn btn-secondary" th:href="@{'/editUser/cancel'}" th:value="${full} ?'Atras' :'Cancel'">Cancelar</a>
			<button name="dni" th:onClick="'javascript:returnUrl()'" class="btn btn-secondary"><i class="fas fa-edit"></i>Check DNI</input>
		</div>
	</div>
</form>

<script type="text/javascript">
function returnUrl(){
	var url= '/userForm/' + document.getElementById("dni").value;
	window.open(url);
	window.close();
}
</script>

<div class="table-responsive" th:if="${motoVarList}" th:object=" ${motoList}">
	<table id="motoList" class="table table-bordered table-hover table-striped">
		<thead class="thead-light">
		<tr>
			<th scope="col">#</th>
			<th scope="col">Moto</th>
			<th scope="col">Modelo</th>
			<th scope="col">Matricula</th>
			<th scope="col">Xasis</th>
			<th></th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="moto: ${motoList}">
			<td th:text="${moto.id}"></td>
			<td th:text="${moto.motocicleta}"></td>
			<td th:text="${moto.modelo}"></td>
			<td th:text="${moto.matricula}"></td>
			<td th:text="${moto.xasis}"></td>
			<td th:object="${userid}">
					<a href="#" th:href="@{'/' + ${userid} + '/' + ${moto.id} + '/editMoto'}"><i class="fas fa-edit"></i></a>
					<a href="#" th:onclick="return confirm('Quieres borrar esta motocicleta?')" th:href="@{'/' + ${userid} + '/' + ${moto.id} + '/deleteMoto'}"><i class="fa-solid fa-trash"></i></a>
					<a href="#" th:href="@{'/' + ${userid} + '/' + ${moto.id} + '/createFactura'}"><i class="fa-solid fa-circle-check"></i></a>
			</td>
		</tr>
		</tbody>
	</table>
	<div class="col-lg-12 text-center">
		<a class="btn btn-secondary" th:href="@{'/editUser/cancel'}" th:value="'Atras'">Atras</a>
		<a th:object="${userid}" class="btn btn-primary" th:href="@{'/' + ${userid} + '/createMoto'}" th:value="'Nueva moto'">Nueva moto</a>
	</div>
</div>

<div th:object=" ${motoid}"> <form class="form" role="form" autocomplete="off" th:if="${motoVarForm}" th:object=" ${userid}" th:action="${editModeMoto} ?@{'/' + ${userid} + '/' + ${motoid} + '/editMoto'} :@{'/' +  ${userid} + '/createMoto'}" method="post">
	<div class="form-group row" th:object=" ${motoForm}">
		<label class="col-lg-3 col-form-label form-control-label">Motocicleta</label>
		<div class="col-lg-9">
			<input class="form-control" type="text" th:field=" ${motoForm.motocicleta}" >
			<div class="alert-danger" th:if="${#fields.hasErrors('motocicleta')}" th:errors="*{motocicleta}">Motocicleta ERROR</div>
		</div>
	</div>
	<div class="form-group row" th:object=" ${motoForm}">
		<label class="col-lg-3 col-form-label form-control-label">Modelo</label>
		<div class="col-lg-9">
			<input class="form-control" type="text" th:field=" ${motoForm.modelo}">
			<div class="alert-danger" th:if="${#fields.hasErrors('modelo')}" th:errors="*{modelo}">Modelo ERROR</div>
		</div>
	</div>
	<div class="form-group row" th:object=" ${motoForm}">
		<label class="col-lg-3 col-form-label form-control-label">Matricula</label>
		<div class="col-lg-9">
			<input class="form-control" type="text" th:field=" ${motoForm.matricula}">
			<div class="alert-danger" th:if="${#fields.hasErrors('matricula')}" th:errors="*{matricula}">Matricula ERROR</div>
		</div>
	</div>
	<div class="form-group row" th:object=" ${motoForm}">
		<label class="col-lg-3 col-form-label form-control-label">Número de xasis (17 dígitos)</label>
		<div class="col-lg-9">
			<input class="form-control" type="text" th:field=" ${motoForm.xasis}">
			<div class="alert-danger" th:if="${#fields.hasErrors('xasis')}" th:errors="*{xasis}">Xasis ERROR</div>
		</div>
	</div>
	
	<div class="form-group row">
		<div class="col-lg-12 text-center" th:object=" ${userid}">
			<a class="btn btn-secondary" th:href="'/' +  ${userid} + '/userMotos'" th:value="'Cancel'">Cancel</a>
			<input type="submit" class="btn btn-primary"  th:href="${editModeMoto} ?@{'/' + ${userid} + '/' +  ${motoid} + '/editMoto'} :@{'/' +  ${userid} + '/createMoto'}" th:value="${editModeMoto} ?'Editar moto' :'Crear moto'">
		</div>
	</div>
	<div class="alert alert-danger text-center" th:if="${FormErrorMessage}" th:text="${FormErrorMessage}">ERROR</div>
</form> </div>